# A2DP协议

平常使用 蓝牙耳机，蓝牙音箱 听音乐就是通过该协议实现的

在蓝牙核心协议的基础上，通过A2DP协议将两个蓝牙设备连接到同一个piconet(微微网)中，实现蓝牙音乐音频流的传输功能

A2DP协议规定了两种角色 SRC 和 SNK

SRC：数字音频流的源，负责将源数据发送到SNK端

SNK：数字音频流的接收器，负责接收SRC发过来的源数据

这两种角色的扮演者在生活中很是常见，手机蓝牙作为生活中使用最多的设备，不言而喻其主要作为SRC存在，那对应的蓝牙耳机、音箱等设备就作为SNK的角色存在

音频从SRC到SNK经历的步骤：

1、在SRC端，捕获音频数据

2、在SRC端，通过A2DP支持的编码方式(如SBC、AAC、aptX、LDAC等)，对捕获的音频数据 进行编码

3、将编码后的音频数据，从SRC端传输到SNK端

4、在SNK端，将编码后的音频数据，解码还原成原始音频数据(PCM)  （如，在SRC端将mp3音频转换成SBC编码的音频数据，然后将编码后的音频数据传输到SNK端，再然后SNK端将SBC编码的音频数据，转换成原始音频数据PCM）

5、在SNK端，播放原始音频数据PCM

蓝牙A2DP支持的编码方式：

|  名称   | 简介                             | 是否支持           |
|  ----  | ----                              | ----               |
| SBC   | Sub-band coding，子带编码           | 所有蓝牙设备必须支持 |
| AAC   | Advanced Audio Coding，高级音频编码  | 可选支持            |
| aptX    | 传统aptX，高通专利编码算法         | 可选支持            |
| aptX-HD  | 高品质aptX，高通专利编码算法       | 可选支持            |
| LDAC     | 索尼专利编码算法                  | 可选支持            |

以上五种编码方式传输的蓝牙音乐品质从低到高排列为：

SBC < AAC < aptX < aptX-HD < LDAC

编码的目的是为了减小数据的大小，以便在蓝牙链路上能更有效地传输